<% if @category.save %>
  <%= turbo_stream.update 'categories', partial: 'transactions/category_select', locals: { categories: @categories, selected: @category.id } %>
  <%= turbo_stream.replace 'category_modal', partial: 'modals/category' %>
  <%= turbo_stream.update 'search_by_category' do %>
    <%= select_tag :category,
      options_for_select(@categories.pluck(:title, :id)),
      include_blank: 'All Categories', class: 'form-select',
      data: { action: 'input->transactions#search' }
    %>
  <% end %>
<% else %>
  <%= turbo_stream.update 'category_errors', partial: 'shared/error_messages', locals: { pattern: @category } %>
<% end %>
